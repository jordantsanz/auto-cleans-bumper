{
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/jtsan/repos/auto-cleans-bumper/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jtsan/repos/auto-cleans-bumper\",\"filename\":\"/Users/jtsan/repos/auto-cleans-bumper/src/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jtsan/repos/auto-cleans-bumper\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.0": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/jtsan/repos/auto-cleans-bumper/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/jtsan/repos/auto-cleans-bumper",
      "filename": "/Users/jtsan/repos/auto-cleans-bumper/src/server.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/jtsan/repos/auto-cleans-bumper",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/jtsan/repos/auto-cleans-bumper/src/server.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/jtsan/repos/auto-cleans-bumper/src/server.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/jtsan/repos/auto-cleans-bumper/src/",
        "sourceFileName": "server.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _morgan = _interopRequireDefault(require(\"morgan\"));\n\nvar EmailController = _interopRequireWildcard(require(\"./controllers/email_controller\"));\n\nvar _excel_controller = require(\"./controllers/excel_controller\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable no-await-in-loop */\nconst sgMail = require('@sendgrid/mail');\n\nconst csv = require('csv-parser');\n\nconst fs = require('fs');\n\nsgMail.setApiKey(process.env.SENDGRID_API_KEY); // import * as EmailController from './controllers/email_controller';\n// initialize\n\nconst app = (0, _express.default)(); // enable/disable cross origin resource sharing if necessary\n\napp.use((0, _cors.default)()); // enable/disable http request logging\n\napp.use((0, _morgan.default)('dev')); // enable only if you want templating\n\napp.set('view engine', 'ejs'); // enable only if you want static assets from folder static\n\napp.use(_express.default.static('static')); // this just allows us to render ejs from the ../app/views directory\n\napp.set('views', _path.default.join(__dirname, '../src/views')); // enable json message body for posting data to API\n\napp.use(_bodyParser.default.urlencoded({\n  extended: true\n}));\napp.use(_bodyParser.default.json()); // additional init stuff should go before hitting the routing\n// default index route\n\napp.get('/', (req, res) => {\n  res.send('hello world!');\n});\n\nconst {\n  CronJob\n} = require('cron'); // async function makeJob() {\n//   const job = new CronJob('0 7 * * *', (async () => {\n//     const prices = [];\n//     const stocks = await StockController.getStocks();\n//     console.log('stocks:', stocks);\n//     for (let i = 0; i < stocks.length; i += 1) {\n//       const open = await EmailController.checkPrice(stocks[i].name);\n//       prices.push({ name: stocks[i].name, open });\n//     }\n//     console.log('You will see this message every minute');\n//     console.log('-----');\n//     console.log('prices', prices);\n//     EmailController.sendEmail(prices);\n//   }), null, true, 'America/Los_Angeles');\n//   job.start();\n// }\n\n\nasync function makeJob2() {\n  const job = new CronJob('0 7 * * *', async () => {\n    EmailController.sendEmail();\n    job.start();\n  });\n} // makeJob();\n\n\n(0, _excel_controller.readInFile)(fs, csv);\nmakeJob2(); // START THE SERVER\n// =============================================================================\n\nconst port = process.env.PORT || 9090;\napp.listen(port);\nconsole.log(`listening on: ${port}`);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJzZ01haWwiLCJyZXF1aXJlIiwiY3N2IiwiZnMiLCJzZXRBcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiU0VOREdSSURfQVBJX0tFWSIsImFwcCIsInVzZSIsInNldCIsImV4cHJlc3MiLCJzdGF0aWMiLCJwYXRoIiwiam9pbiIsIl9fZGlybmFtZSIsImJvZHlQYXJzZXIiLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJqc29uIiwiZ2V0IiwicmVxIiwicmVzIiwic2VuZCIsIkNyb25Kb2IiLCJtYWtlSm9iMiIsImpvYiIsIkVtYWlsQ29udHJvbGxlciIsInNlbmRFbWFpbCIsInN0YXJ0IiwicG9ydCIsIlBPUlQiLCJsaXN0ZW4iLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoiOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7OztBQVBBO0FBU0EsTUFBTUEsTUFBTSxHQUFHQyxPQUFPLENBQUMsZ0JBQUQsQ0FBdEI7O0FBRUEsTUFBTUMsR0FBRyxHQUFHRCxPQUFPLENBQUMsWUFBRCxDQUFuQjs7QUFDQSxNQUFNRSxFQUFFLEdBQUdGLE9BQU8sQ0FBQyxJQUFELENBQWxCOztBQUVBRCxNQUFNLENBQUNJLFNBQVAsQ0FBaUJDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxnQkFBN0IsRSxDQUNBO0FBRUE7O0FBQ0EsTUFBTUMsR0FBRyxHQUFHLHVCQUFaLEMsQ0FFQTs7QUFDQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsb0JBQVIsRSxDQUVBOztBQUNBRCxHQUFHLENBQUNDLEdBQUosQ0FBUSxxQkFBTyxLQUFQLENBQVIsRSxDQUVBOztBQUNBRCxHQUFHLENBQUNFLEdBQUosQ0FBUSxhQUFSLEVBQXVCLEtBQXZCLEUsQ0FDQTs7QUFDQUYsR0FBRyxDQUFDQyxHQUFKLENBQVFFLGlCQUFRQyxNQUFSLENBQWUsUUFBZixDQUFSLEUsQ0FFQTs7QUFDQUosR0FBRyxDQUFDRSxHQUFKLENBQVEsT0FBUixFQUFpQkcsY0FBS0MsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLGNBQXJCLENBQWpCLEUsQ0FFQTs7QUFDQVAsR0FBRyxDQUFDQyxHQUFKLENBQVFPLG9CQUFXQyxVQUFYLENBQXNCO0FBQUVDLEVBQUFBLFFBQVEsRUFBRTtBQUFaLENBQXRCLENBQVI7QUFDQVYsR0FBRyxDQUFDQyxHQUFKLENBQVFPLG9CQUFXRyxJQUFYLEVBQVIsRSxDQUVBO0FBRUE7O0FBQ0FYLEdBQUcsQ0FBQ1ksR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUN6QkEsRUFBQUEsR0FBRyxDQUFDQyxJQUFKLENBQVMsY0FBVDtBQUNELENBRkQ7O0FBSUEsTUFBTTtBQUFFQyxFQUFBQTtBQUFGLElBQWN2QixPQUFPLENBQUMsTUFBRCxDQUEzQixDLENBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBLGVBQWV3QixRQUFmLEdBQTBCO0FBQ3hCLFFBQU1DLEdBQUcsR0FBRyxJQUFJRixPQUFKLENBQVksV0FBWixFQUEwQixZQUFZO0FBQ2hERyxJQUFBQSxlQUFlLENBQUNDLFNBQWhCO0FBQ0FGLElBQUFBLEdBQUcsQ0FBQ0csS0FBSjtBQUNELEdBSFcsQ0FBWjtBQUlELEMsQ0FFRDs7O0FBQ0Esa0NBQVcxQixFQUFYLEVBQWVELEdBQWY7QUFFQXVCLFFBQVEsRyxDQUVSO0FBQ0E7O0FBQ0EsTUFBTUssSUFBSSxHQUFHekIsT0FBTyxDQUFDQyxHQUFSLENBQVl5QixJQUFaLElBQW9CLElBQWpDO0FBQ0F2QixHQUFHLENBQUN3QixNQUFKLENBQVdGLElBQVg7QUFFQUcsT0FBTyxDQUFDQyxHQUFSLENBQWEsaUJBQWdCSixJQUFLLEVBQWxDIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9qdHNhbi9yZXBvcy9hdXRvLWNsZWFucy1idW1wZXIvc3JjLyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLWF3YWl0LWluLWxvb3AgKi9cbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBtb3JnYW4gZnJvbSAnbW9yZ2FuJztcbmltcG9ydCAqIGFzIEVtYWlsQ29udHJvbGxlciBmcm9tICcuL2NvbnRyb2xsZXJzL2VtYWlsX2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgcmVhZEluRmlsZSB9IGZyb20gJy4vY29udHJvbGxlcnMvZXhjZWxfY29udHJvbGxlcic7XG5cbmNvbnN0IHNnTWFpbCA9IHJlcXVpcmUoJ0BzZW5kZ3JpZC9tYWlsJyk7XG5cbmNvbnN0IGNzdiA9IHJlcXVpcmUoJ2Nzdi1wYXJzZXInKTtcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcblxuc2dNYWlsLnNldEFwaUtleShwcm9jZXNzLmVudi5TRU5ER1JJRF9BUElfS0VZKTtcbi8vIGltcG9ydCAqIGFzIEVtYWlsQ29udHJvbGxlciBmcm9tICcuL2NvbnRyb2xsZXJzL2VtYWlsX2NvbnRyb2xsZXInO1xuXG4vLyBpbml0aWFsaXplXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5cbi8vIGVuYWJsZS9kaXNhYmxlIGNyb3NzIG9yaWdpbiByZXNvdXJjZSBzaGFyaW5nIGlmIG5lY2Vzc2FyeVxuYXBwLnVzZShjb3JzKCkpO1xuXG4vLyBlbmFibGUvZGlzYWJsZSBodHRwIHJlcXVlc3QgbG9nZ2luZ1xuYXBwLnVzZShtb3JnYW4oJ2RldicpKTtcblxuLy8gZW5hYmxlIG9ubHkgaWYgeW91IHdhbnQgdGVtcGxhdGluZ1xuYXBwLnNldCgndmlldyBlbmdpbmUnLCAnZWpzJyk7XG4vLyBlbmFibGUgb25seSBpZiB5b3Ugd2FudCBzdGF0aWMgYXNzZXRzIGZyb20gZm9sZGVyIHN0YXRpY1xuYXBwLnVzZShleHByZXNzLnN0YXRpYygnc3RhdGljJykpO1xuXG4vLyB0aGlzIGp1c3QgYWxsb3dzIHVzIHRvIHJlbmRlciBlanMgZnJvbSB0aGUgLi4vYXBwL3ZpZXdzIGRpcmVjdG9yeVxuYXBwLnNldCgndmlld3MnLCBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vc3JjL3ZpZXdzJykpO1xuXG4vLyBlbmFibGUganNvbiBtZXNzYWdlIGJvZHkgZm9yIHBvc3RpbmcgZGF0YSB0byBBUElcbmFwcC51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpO1xuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5cbi8vIGFkZGl0aW9uYWwgaW5pdCBzdHVmZiBzaG91bGQgZ28gYmVmb3JlIGhpdHRpbmcgdGhlIHJvdXRpbmdcblxuLy8gZGVmYXVsdCBpbmRleCByb3V0ZVxuYXBwLmdldCgnLycsIChyZXEsIHJlcykgPT4ge1xuICByZXMuc2VuZCgnaGVsbG8gd29ybGQhJyk7XG59KTtcblxuY29uc3QgeyBDcm9uSm9iIH0gPSByZXF1aXJlKCdjcm9uJyk7XG5cbi8vIGFzeW5jIGZ1bmN0aW9uIG1ha2VKb2IoKSB7XG4vLyAgIGNvbnN0IGpvYiA9IG5ldyBDcm9uSm9iKCcwIDcgKiAqIConLCAoYXN5bmMgKCkgPT4ge1xuLy8gICAgIGNvbnN0IHByaWNlcyA9IFtdO1xuLy8gICAgIGNvbnN0IHN0b2NrcyA9IGF3YWl0IFN0b2NrQ29udHJvbGxlci5nZXRTdG9ja3MoKTtcbi8vICAgICBjb25zb2xlLmxvZygnc3RvY2tzOicsIHN0b2Nrcyk7XG4vLyAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdG9ja3MubGVuZ3RoOyBpICs9IDEpIHtcbi8vICAgICAgIGNvbnN0IG9wZW4gPSBhd2FpdCBFbWFpbENvbnRyb2xsZXIuY2hlY2tQcmljZShzdG9ja3NbaV0ubmFtZSk7XG4vLyAgICAgICBwcmljZXMucHVzaCh7IG5hbWU6IHN0b2Nrc1tpXS5uYW1lLCBvcGVuIH0pO1xuLy8gICAgIH1cblxuLy8gICAgIGNvbnNvbGUubG9nKCdZb3Ugd2lsbCBzZWUgdGhpcyBtZXNzYWdlIGV2ZXJ5IG1pbnV0ZScpO1xuLy8gICAgIGNvbnNvbGUubG9nKCctLS0tLScpO1xuLy8gICAgIGNvbnNvbGUubG9nKCdwcmljZXMnLCBwcmljZXMpO1xuLy8gICAgIEVtYWlsQ29udHJvbGxlci5zZW5kRW1haWwocHJpY2VzKTtcbi8vICAgfSksIG51bGwsIHRydWUsICdBbWVyaWNhL0xvc19BbmdlbGVzJyk7XG4vLyAgIGpvYi5zdGFydCgpO1xuLy8gfVxuXG5hc3luYyBmdW5jdGlvbiBtYWtlSm9iMigpIHtcbiAgY29uc3Qgam9iID0gbmV3IENyb25Kb2IoJzAgNyAqICogKicsIChhc3luYyAoKSA9PiB7XG4gICAgRW1haWxDb250cm9sbGVyLnNlbmRFbWFpbCgpO1xuICAgIGpvYi5zdGFydCgpO1xuICB9KSk7XG59XG5cbi8vIG1ha2VKb2IoKTtcbnJlYWRJbkZpbGUoZnMsIGNzdik7XG5cbm1ha2VKb2IyKCk7XG5cbi8vIFNUQVJUIFRIRSBTRVJWRVJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jb25zdCBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCA5MDkwO1xuYXBwLmxpc3Rlbihwb3J0KTtcblxuY29uc29sZS5sb2coYGxpc3RlbmluZyBvbjogJHtwb3J0fWApO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "server.js"
      ],
      "names": [
        "sgMail",
        "require",
        "csv",
        "fs",
        "setApiKey",
        "process",
        "env",
        "SENDGRID_API_KEY",
        "app",
        "use",
        "set",
        "express",
        "static",
        "path",
        "join",
        "__dirname",
        "bodyParser",
        "urlencoded",
        "extended",
        "json",
        "get",
        "req",
        "res",
        "send",
        "CronJob",
        "makeJob2",
        "job",
        "EmailController",
        "sendEmail",
        "start",
        "port",
        "PORT",
        "listen",
        "console",
        "log"
      ],
      "mappings": ";;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;AAPA;AASA,MAAMA,MAAM,GAAGC,OAAO,CAAC,gBAAD,CAAtB;;AAEA,MAAMC,GAAG,GAAGD,OAAO,CAAC,YAAD,CAAnB;;AACA,MAAME,EAAE,GAAGF,OAAO,CAAC,IAAD,CAAlB;;AAEAD,MAAM,CAACI,SAAP,CAAiBC,OAAO,CAACC,GAAR,CAAYC,gBAA7B,E,CACA;AAEA;;AACA,MAAMC,GAAG,GAAG,uBAAZ,C,CAEA;;AACAA,GAAG,CAACC,GAAJ,CAAQ,oBAAR,E,CAEA;;AACAD,GAAG,CAACC,GAAJ,CAAQ,qBAAO,KAAP,CAAR,E,CAEA;;AACAD,GAAG,CAACE,GAAJ,CAAQ,aAAR,EAAuB,KAAvB,E,CACA;;AACAF,GAAG,CAACC,GAAJ,CAAQE,iBAAQC,MAAR,CAAe,QAAf,CAAR,E,CAEA;;AACAJ,GAAG,CAACE,GAAJ,CAAQ,OAAR,EAAiBG,cAAKC,IAAL,CAAUC,SAAV,EAAqB,cAArB,CAAjB,E,CAEA;;AACAP,GAAG,CAACC,GAAJ,CAAQO,oBAAWC,UAAX,CAAsB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAtB,CAAR;AACAV,GAAG,CAACC,GAAJ,CAAQO,oBAAWG,IAAX,EAAR,E,CAEA;AAEA;;AACAX,GAAG,CAACY,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzBA,EAAAA,GAAG,CAACC,IAAJ,CAAS,cAAT;AACD,CAFD;;AAIA,MAAM;AAAEC,EAAAA;AAAF,IAAcvB,OAAO,CAAC,MAAD,CAA3B,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,eAAewB,QAAf,GAA0B;AACxB,QAAMC,GAAG,GAAG,IAAIF,OAAJ,CAAY,WAAZ,EAA0B,YAAY;AAChDG,IAAAA,eAAe,CAACC,SAAhB;AACAF,IAAAA,GAAG,CAACG,KAAJ;AACD,GAHW,CAAZ;AAID,C,CAED;;;AACA,kCAAW1B,EAAX,EAAeD,GAAf;AAEAuB,QAAQ,G,CAER;AACA;;AACA,MAAMK,IAAI,GAAGzB,OAAO,CAACC,GAAR,CAAYyB,IAAZ,IAAoB,IAAjC;AACAvB,GAAG,CAACwB,MAAJ,CAAWF,IAAX;AAEAG,OAAO,CAACC,GAAR,CAAa,iBAAgBJ,IAAK,EAAlC",
      "sourceRoot": "/Users/jtsan/repos/auto-cleans-bumper/src/",
      "sourcesContent": [
        "/* eslint-disable no-await-in-loop */\nimport express from 'express';\nimport bodyParser from 'body-parser';\nimport cors from 'cors';\nimport path from 'path';\nimport morgan from 'morgan';\nimport * as EmailController from './controllers/email_controller';\nimport { readInFile } from './controllers/excel_controller';\n\nconst sgMail = require('@sendgrid/mail');\n\nconst csv = require('csv-parser');\nconst fs = require('fs');\n\nsgMail.setApiKey(process.env.SENDGRID_API_KEY);\n// import * as EmailController from './controllers/email_controller';\n\n// initialize\nconst app = express();\n\n// enable/disable cross origin resource sharing if necessary\napp.use(cors());\n\n// enable/disable http request logging\napp.use(morgan('dev'));\n\n// enable only if you want templating\napp.set('view engine', 'ejs');\n// enable only if you want static assets from folder static\napp.use(express.static('static'));\n\n// this just allows us to render ejs from the ../app/views directory\napp.set('views', path.join(__dirname, '../src/views'));\n\n// enable json message body for posting data to API\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(bodyParser.json());\n\n// additional init stuff should go before hitting the routing\n\n// default index route\napp.get('/', (req, res) => {\n  res.send('hello world!');\n});\n\nconst { CronJob } = require('cron');\n\n// async function makeJob() {\n//   const job = new CronJob('0 7 * * *', (async () => {\n//     const prices = [];\n//     const stocks = await StockController.getStocks();\n//     console.log('stocks:', stocks);\n//     for (let i = 0; i < stocks.length; i += 1) {\n//       const open = await EmailController.checkPrice(stocks[i].name);\n//       prices.push({ name: stocks[i].name, open });\n//     }\n\n//     console.log('You will see this message every minute');\n//     console.log('-----');\n//     console.log('prices', prices);\n//     EmailController.sendEmail(prices);\n//   }), null, true, 'America/Los_Angeles');\n//   job.start();\n// }\n\nasync function makeJob2() {\n  const job = new CronJob('0 7 * * *', (async () => {\n    EmailController.sendEmail();\n    job.start();\n  }));\n}\n\n// makeJob();\nreadInFile(fs, csv);\n\nmakeJob2();\n\n// START THE SERVER\n// =============================================================================\nconst port = process.env.PORT || 9090;\napp.listen(port);\n\nconsole.log(`listening on: ${port}`);\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1630167865077
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/jtsan/repos/auto-cleans-bumper/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jtsan/repos/auto-cleans-bumper\",\"filename\":\"/Users/jtsan/repos/auto-cleans-bumper/src/controllers/email_controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jtsan/repos/auto-cleans-bumper\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.0": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/jtsan/repos/auto-cleans-bumper",
      "filename": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/email_controller.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/jtsan/repos/auto-cleans-bumper",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/email_controller.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/email_controller.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/",
        "sourceFileName": "email_controller.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sendEmail = void 0;\n\nvar _mail = _interopRequireDefault(require(\"@sendgrid/mail\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable no-unreachable */\n\n/* eslint-disable import/prefer-default-export */\nconst sendEmail = (emailInfo, targetDate) => {\n  const msg = {\n    to: emailInfo.to,\n    from: 'sigma.nu@dartmouth.edu',\n    // Use the email address or domain you verified above\n    subject: `Cleans bump: ${targetDate}`,\n    html: `<p> ${emailInfo.body} </p>`\n  };\n  console.log(`sending the email to ${emailInfo.to} about cleaning ${emailInfo.body} on ${targetDate}`); //   sgMail\n  //     .send(msg)\n  //     .then(() => {}, (error) => {\n  //       console.error(error);\n  //       if (error.response) {\n  //         console.error(error.response.body);\n  //       }\n  //     });\n};\n\nexports.sendEmail = sendEmail;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVtYWlsX2NvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsic2VuZEVtYWlsIiwiZW1haWxJbmZvIiwidGFyZ2V0RGF0ZSIsIm1zZyIsInRvIiwiZnJvbSIsInN1YmplY3QiLCJodG1sIiwiYm9keSIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQTs7OztBQUZBOztBQUNBO0FBR08sTUFBTUEsU0FBUyxHQUFHLENBQUNDLFNBQUQsRUFBWUMsVUFBWixLQUEyQjtBQUNsRCxRQUFNQyxHQUFHLEdBQUc7QUFDVkMsSUFBQUEsRUFBRSxFQUFFSCxTQUFTLENBQUNHLEVBREo7QUFFVkMsSUFBQUEsSUFBSSxFQUFFLHdCQUZJO0FBRXNCO0FBQ2hDQyxJQUFBQSxPQUFPLEVBQUcsZ0JBQWVKLFVBQVcsRUFIMUI7QUFJVkssSUFBQUEsSUFBSSxFQUFHLE9BQU1OLFNBQVMsQ0FBQ08sSUFBSztBQUpsQixHQUFaO0FBTUFDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLHdCQUF1QlQsU0FBUyxDQUFDRyxFQUFHLG1CQUFrQkgsU0FBUyxDQUFDTyxJQUFLLE9BQU1OLFVBQVcsRUFBbkcsRUFQa0QsQ0FRbEQ7QUFDQTtBQUNBO0FBQ0E7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNDLENBakJNIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9qdHNhbi9yZXBvcy9hdXRvLWNsZWFucy1idW1wZXIvc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXVucmVhY2hhYmxlICovXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0ICovXG5pbXBvcnQgc2dNYWlsIGZyb20gJ0BzZW5kZ3JpZC9tYWlsJztcblxuZXhwb3J0IGNvbnN0IHNlbmRFbWFpbCA9IChlbWFpbEluZm8sIHRhcmdldERhdGUpID0+IHtcbiAgY29uc3QgbXNnID0ge1xuICAgIHRvOiBlbWFpbEluZm8udG8sXG4gICAgZnJvbTogJ3NpZ21hLm51QGRhcnRtb3V0aC5lZHUnLCAvLyBVc2UgdGhlIGVtYWlsIGFkZHJlc3Mgb3IgZG9tYWluIHlvdSB2ZXJpZmllZCBhYm92ZVxuICAgIHN1YmplY3Q6IGBDbGVhbnMgYnVtcDogJHt0YXJnZXREYXRlfWAsXG4gICAgaHRtbDogYDxwPiAke2VtYWlsSW5mby5ib2R5fSA8L3A+YCxcbiAgfTtcbiAgY29uc29sZS5sb2coYHNlbmRpbmcgdGhlIGVtYWlsIHRvICR7ZW1haWxJbmZvLnRvfSBhYm91dCBjbGVhbmluZyAke2VtYWlsSW5mby5ib2R5fSBvbiAke3RhcmdldERhdGV9YCk7XG4gIC8vICAgc2dNYWlsXG4gIC8vICAgICAuc2VuZChtc2cpXG4gIC8vICAgICAudGhlbigoKSA9PiB7fSwgKGVycm9yKSA9PiB7XG4gIC8vICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4vLyAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHtcbi8vICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvci5yZXNwb25zZS5ib2R5KTtcbi8vICAgICAgIH1cbi8vICAgICB9KTtcbn07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "email_controller.js"
      ],
      "names": [
        "sendEmail",
        "emailInfo",
        "targetDate",
        "msg",
        "to",
        "from",
        "subject",
        "html",
        "body",
        "console",
        "log"
      ],
      "mappings": ";;;;;;;AAEA;;;;AAFA;;AACA;AAGO,MAAMA,SAAS,GAAG,CAACC,SAAD,EAAYC,UAAZ,KAA2B;AAClD,QAAMC,GAAG,GAAG;AACVC,IAAAA,EAAE,EAAEH,SAAS,CAACG,EADJ;AAEVC,IAAAA,IAAI,EAAE,wBAFI;AAEsB;AAChCC,IAAAA,OAAO,EAAG,gBAAeJ,UAAW,EAH1B;AAIVK,IAAAA,IAAI,EAAG,OAAMN,SAAS,CAACO,IAAK;AAJlB,GAAZ;AAMAC,EAAAA,OAAO,CAACC,GAAR,CAAa,wBAAuBT,SAAS,CAACG,EAAG,mBAAkBH,SAAS,CAACO,IAAK,OAAMN,UAAW,EAAnG,EAPkD,CAQlD;AACA;AACA;AACA;AAEF;AACA;AACA;AACA;AACC,CAjBM",
      "sourceRoot": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/",
      "sourcesContent": [
        "/* eslint-disable no-unreachable */\n/* eslint-disable import/prefer-default-export */\nimport sgMail from '@sendgrid/mail';\n\nexport const sendEmail = (emailInfo, targetDate) => {\n  const msg = {\n    to: emailInfo.to,\n    from: 'sigma.nu@dartmouth.edu', // Use the email address or domain you verified above\n    subject: `Cleans bump: ${targetDate}`,\n    html: `<p> ${emailInfo.body} </p>`,\n  };\n  console.log(`sending the email to ${emailInfo.to} about cleaning ${emailInfo.body} on ${targetDate}`);\n  //   sgMail\n  //     .send(msg)\n  //     .then(() => {}, (error) => {\n  //       console.error(error);\n\n//       if (error.response) {\n//         console.error(error.response.body);\n//       }\n//     });\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1630167789307
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/jtsan/repos/auto-cleans-bumper/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jtsan/repos/auto-cleans-bumper\",\"filename\":\"/Users/jtsan/repos/auto-cleans-bumper/src/controllers/excel_controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jtsan/repos/auto-cleans-bumper\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.0": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/jtsan/repos/auto-cleans-bumper",
      "filename": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/excel_controller.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/jtsan/repos/auto-cleans-bumper",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/excel_controller.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/excel_controller.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/",
        "sourceFileName": "excel_controller.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.readInFile = exports.readInEmails = exports.findDailyCleans = void 0;\n\nvar _email_controller = require(\"./email_controller\");\n\nconst cleanDate = (day, date, month) => {\n  const dateMonth = `${month}/${date}`;\n\n  switch (day) {\n    case 1:\n      return `Mon ${dateMonth}`;\n\n    case 2:\n      return `Tue ${dateMonth}`;\n\n    case 3:\n      return `Wed ${dateMonth}`;\n\n    case 4:\n      return `Thu ${dateMonth}`;\n\n    case 5:\n      return `Fri ${dateMonth}`;\n\n    case 6:\n      return `Sat ${dateMonth}`;\n\n    case 0:\n      return `Sun ${dateMonth}`;\n\n    default:\n      return `Tue ${dateMonth}`;\n  }\n};\n\nconst findEmail = (fullName, namesAndEmails) => {\n  let email = ''; // eslint-disable-next-line consistent-return\n\n  namesAndEmails.forEach(obj => {\n    Object.keys(obj).forEach(key => {\n      if (obj[key] === fullName) {\n        email = obj['Personal Gmail'];\n      }\n    });\n  });\n  return email;\n};\n\nconst findDailyCleans = (data, namesAndEmails) => {\n  const currentDay = new Date().getDay();\n  const targetDate = cleanDate(currentDay, new Date().getDate(), new Date().getMonth() + 1);\n  let foundKey = false;\n  Object.keys(data[0]).forEach(key => {\n    if (key === targetDate) {\n      foundKey = true;\n    }\n  });\n\n  if (!foundKey) {\n    console.log('Date that is not on sheet. Bye! ');\n    return;\n  }\n\n  let firstNameKey = 'First Name';\n  Object.keys(data).forEach(key => {\n    Object.keys(data[key]).forEach(key2 => {\n      if (key2.match('First Name')) {\n        firstNameKey = key2;\n      }\n    });\n  });\n  const namesCleaningWhat = [];\n  Object.keys(data).forEach(key => {\n    if (data[key][targetDate] !== '') {\n      const fullName = `${data[key][firstNameKey]} ${data[key]['Last Name']}`;\n      namesCleaningWhat.push({\n        name: fullName,\n        body: `Hey there! Just a bump, today (${targetDate}) you're cleaning: ${data[key][targetDate]}`,\n        to: findEmail(fullName, namesAndEmails)\n      });\n    }\n  });\n  namesCleaningWhat.forEach(obj => {\n    (0, _email_controller.sendEmail)(obj, targetDate);\n  });\n};\n\nexports.findDailyCleans = findDailyCleans;\n\nconst readInEmails = async (fs, csv, results) => {\n  const namesAndEmails = [];\n  let error = false;\n  const readable = fs.createReadStream('src/namesAndEmails.csv');\n  readable.on('error', err => {\n    console.log(err);\n    error = true;\n  });\n  const writeable = readable.pipe(csv());\n  writeable.on('error', err => {\n    console.log(err);\n    error = true;\n  });\n\n  if (error) {\n    console.log('There was an error reading the file. Are you sure you put it in the right place?');\n  }\n\n  writeable.on('data', data => {\n    return namesAndEmails.push(data);\n  }).on('end', () => {\n    findDailyCleans(results, namesAndEmails);\n  });\n};\n\nexports.readInEmails = readInEmails;\n\nconst readInFile = async (fs, csv) => {\n  const results = [];\n  let error = false;\n  const readable = fs.createReadStream('src/duties2.csv');\n  readable.on('error', err => {\n    console.log(err);\n    error = true;\n  });\n  const writeable = readable.pipe(csv());\n  writeable.on('error', err => {\n    console.log(err);\n    error = true;\n  });\n\n  if (error) {\n    console.log('There was an error reading the file. Are you sure you put it in the right place?');\n  }\n\n  writeable.on('data', data => {\n    return results.push(data);\n  }).on('end', () => {\n    readInEmails(fs, csv, results);\n  });\n};\n\nexports.readInFile = readInFile;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4Y2VsX2NvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiY2xlYW5EYXRlIiwiZGF5IiwiZGF0ZSIsIm1vbnRoIiwiZGF0ZU1vbnRoIiwiZmluZEVtYWlsIiwiZnVsbE5hbWUiLCJuYW1lc0FuZEVtYWlscyIsImVtYWlsIiwiZm9yRWFjaCIsIm9iaiIsIk9iamVjdCIsImtleXMiLCJrZXkiLCJmaW5kRGFpbHlDbGVhbnMiLCJkYXRhIiwiY3VycmVudERheSIsIkRhdGUiLCJnZXREYXkiLCJ0YXJnZXREYXRlIiwiZ2V0RGF0ZSIsImdldE1vbnRoIiwiZm91bmRLZXkiLCJjb25zb2xlIiwibG9nIiwiZmlyc3ROYW1lS2V5Iiwia2V5MiIsIm1hdGNoIiwibmFtZXNDbGVhbmluZ1doYXQiLCJwdXNoIiwibmFtZSIsImJvZHkiLCJ0byIsInJlYWRJbkVtYWlscyIsImZzIiwiY3N2IiwicmVzdWx0cyIsImVycm9yIiwicmVhZGFibGUiLCJjcmVhdGVSZWFkU3RyZWFtIiwib24iLCJlcnIiLCJ3cml0ZWFibGUiLCJwaXBlIiwicmVhZEluRmlsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUVBLE1BQU1BLFNBQVMsR0FBRyxDQUFDQyxHQUFELEVBQU1DLElBQU4sRUFBWUMsS0FBWixLQUFzQjtBQUN0QyxRQUFNQyxTQUFTLEdBQUksR0FBRUQsS0FBTSxJQUFHRCxJQUFLLEVBQW5DOztBQUNBLFVBQVFELEdBQVI7QUFDRSxTQUFLLENBQUw7QUFDRSxhQUFRLE9BQU1HLFNBQVUsRUFBeEI7O0FBQ0YsU0FBSyxDQUFMO0FBQ0UsYUFBUSxPQUFNQSxTQUFVLEVBQXhCOztBQUNGLFNBQUssQ0FBTDtBQUNFLGFBQVEsT0FBTUEsU0FBVSxFQUF4Qjs7QUFDRixTQUFLLENBQUw7QUFDRSxhQUFRLE9BQU1BLFNBQVUsRUFBeEI7O0FBQ0YsU0FBSyxDQUFMO0FBQ0UsYUFBUSxPQUFNQSxTQUFVLEVBQXhCOztBQUNGLFNBQUssQ0FBTDtBQUNFLGFBQVEsT0FBTUEsU0FBVSxF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QUFoQjtBQUNBLE1BQUlDLEtBQUssR0FBRyxLQUFaO0FBQ0EsUUFBTUMsUUFBUSxHQUFHSixFQUFFLENBQUNLLGdCQUFILENBQW9CLGlCQUFwQixDQUFqQjtBQUVBRCxFQUFBQSxRQUFRLENBQUNFLEVBQVQsQ0FBWSxPQUFaLEVBQXNCQyxHQUFELElBQVM7QUFDNUJsQixJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWWlCLEdBQVo7QUFDQUosSUFBQUEsS0FBSyxHQUFHLElBQVI7QUFDRCxHQUhEO0FBS0EsUUFBTUssU0FBUyxHQUFHSixRQUFRLENBQUNLLElBQVQsQ0FBY1IsR0FBRyxFQUFqQixDQUFsQjtBQUNBTyxFQUFBQSxTQUFTLENBQUNGLEVBQVYsQ0FBYSxPQUFiLEVBQXVCQyxHQUFELElBQVM7QUFDN0JsQixJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWWlCLEdBQVo7QUFDQUosSUFBQUEsS0FBSyxHQUFHLElBQVI7QUFDRCxHQUhEOztBQUtBLE1BQUlBLEtBQUosRUFBVztBQUNUZCxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxrRkFBWjtBQUNEOztBQUVEa0IsRUFBQUEsU0FBUyxDQUFDRixFQUFWLENBQWEsTUFBYixFQUFzQnpCLElBQUQsSUFBVTtBQUFFLFdBQU9xQixPQUFPLENBQUNQLElBQVIsQ0FBYWQsSUFBYixDQUFQO0FBQTRCLEdBQTdELEVBQ0d5QixFQURILENBQ00sS0FETixFQUNhLE1BQU07QUFDZlAsSUFBQUEsWUFBWSxDQUFDQyxFQUFELEVBQUtDLEdBQUwsRUFBVUMsT0FBVixDQUFaO0FBQ0QsR0FISDtBQUlELENBeEJNIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9qdHNhbi9yZXBvcy9hdXRvLWNsZWFucy1idW1wZXIvc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNlbmRFbWFpbCB9IGZyb20gJy4vZW1haWxfY29udHJvbGxlcic7XG5cbmNvbnN0IGNsZWFuRGF0ZSA9IChkYXksIGRhdGUsIG1vbnRoKSA9PiB7XG4gIGNvbnN0IGRhdGVNb250aCA9IGAke21vbnRofS8ke2RhdGV9YDtcbiAgc3dpdGNoIChkYXkpIHtcbiAgICBjYXNlIDE6XG4gICAgICByZXR1cm4gYE1vbiAke2RhdGVNb250aH1gO1xuICAgIGNhc2UgMjpcbiAgICAgIHJldHVybiBgVHVlICR7ZGF0ZU1vbnRofWA7XG4gICAgY2FzZSAzOlxuICAgICAgcmV0dXJuIGBXZWQgJHtkYXRlTW9udGh9YDtcbiAgICBjYXNlIDQ6XG4gICAgICByZXR1cm4gYFRodSAke2RhdGVNb250aH1gO1xuICAgIGNhc2UgNTpcbiAgICAgIHJldHVybiBgRnJpICR7ZGF0ZU1vbnRofWA7XG4gICAgY2FzZSA2OlxuICAgICAgcmV0dXJuIGBTYXQgJHtkYXRlTW9udGh9YDtcbiAgICBjYXNlIDA6XG4gICAgICByZXR1cm4gYFN1biAke2RhdGVNb250aH1gO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gYFR1ZSAke2RhdGVNb250aH1gO1xuICB9XG59O1xuXG5jb25zdCBmaW5kRW1haWwgPSAoZnVsbE5hbWUsIG5hbWVzQW5kRW1haWxzKSA9PiB7XG4gIGxldCBlbWFpbCA9ICcnO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgbmFtZXNBbmRFbWFpbHMuZm9yRWFjaCgob2JqKSA9PiB7XG4gICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGlmIChvYmpba2V5XSA9PT0gZnVsbE5hbWUpIHtcbiAgICAgICAgZW1haWwgPSBvYmpbJ1BlcnNvbmFsIEdtYWlsJ107XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiBlbWFpbDtcbn07XG5cbmV4cG9ydCBjb25zdCBmaW5kRGFpbHlDbGVhbnMgPSAoZGF0YSwgbmFtZXNBbmRFbWFpbHMpID0+IHtcbiAgY29uc3QgY3VycmVudERheSA9IG5ldyBEYXRlKCkuZ2V0RGF5KCk7XG4gIGNvbnN0IHRhcmdldERhdGUgPSBjbGVhbkRhdGUoY3VycmVudERheSwgbmV3IERhdGUoKS5nZXREYXRlKCksIG5ldyBEYXRlKCkuZ2V0TW9udGgoKSArIDEpO1xuXG4gIGxldCBmb3VuZEtleSA9IGZhbHNlO1xuICBPYmplY3Qua2V5cyhkYXRhWzBdKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBpZiAoa2V5ID09PSB0YXJnZXREYXRlKSB7XG4gICAgICBmb3VuZEtleSA9IHRydWU7XG4gICAgfVxuICB9KTtcblxuICBpZiAoIWZvdW5kS2V5KSB7XG4gICAgY29uc29sZS5sb2coJ0RhdGUgdGhhdCBpcyBub3Qgb24gc2hlZXQuIEJ5ZSEgJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IGZpcnN0TmFtZUtleSA9ICdGaXJzdCBOYW1lJztcblxuICBPYmplY3Qua2V5cyhkYXRhKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBPYmplY3Qua2V5cyhkYXRhW2tleV0pLmZvckVhY2goKGtleTIpID0+IHtcbiAgICAgIGlmIChrZXkyLm1hdGNoKCdGaXJzdCBOYW1lJykpIHtcbiAgICAgICAgZmlyc3ROYW1lS2V5ID0ga2V5MjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgY29uc3QgbmFtZXNDbGVhbmluZ1doYXQgPSBbXTtcblxuICBPYmplY3Qua2V5cyhkYXRhKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBpZiAoZGF0YVtrZXldW3RhcmdldERhdGVdICE9PSAnJykge1xuICAgICAgY29uc3QgZnVsbE5hbWUgPSBgJHtkYXRhW2tleV1bZmlyc3ROYW1lS2V5XX0gJHtkYXRhW2tleV1bJ0xhc3QgTmFtZSddfWA7XG4gICAgICBuYW1lc0NsZWFuaW5nV2hhdC5wdXNoKHtcbiAgICAgICAgbmFtZTogZnVsbE5hbWUsXG4gICAgICAgIGJvZHk6IGBIZXkgdGhlcmUhIEp1c3QgYSBidW1wLCB0b2RheSAoJHt0YXJnZXREYXRlfSkgeW91J3JlIGNsZWFuaW5nOiAke2RhdGFba2V5XVt0YXJnZXREYXRlXX1gLFxuICAgICAgICB0bzogZmluZEVtYWlsKGZ1bGxOYW1lLCBuYW1lc0FuZEVtYWlscyksXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIG5hbWVzQ2xlYW5pbmdXaGF0LmZvckVhY2goKG9iaikgPT4ge1xuICAgIHNlbmRFbWFpbChvYmosIHRhcmdldERhdGUpO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCByZWFkSW5FbWFpbHMgPSBhc3luYyAoZnMsIGNzdiwgcmVzdWx0cykgPT4ge1xuICBjb25zdCBuYW1lc0FuZEVtYWlscyA9IFtdO1xuICBsZXQgZXJyb3IgPSBmYWxzZTtcbiAgY29uc3QgcmVhZGFibGUgPSBmcy5jcmVhdGVSZWFkU3RyZWFtKCdzcmMvbmFtZXNBbmRFbWFpbHMuY3N2Jyk7XG5cbiAgcmVhZGFibGUub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgZXJyb3IgPSB0cnVlO1xuICB9KTtcblxuICBjb25zdCB3cml0ZWFibGUgPSByZWFkYWJsZS5waXBlKGNzdigpKTtcbiAgd3JpdGVhYmxlLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIGVycm9yID0gdHJ1ZTtcbiAgfSk7XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coJ1RoZXJlIHdhcyBhbiBlcnJvciByZWFkaW5nIHRoZSBmaWxlLiBBcmUgeW91IHN1cmUgeW91IHB1dCBpdCBpbiB0aGUgcmlnaHQgcGxhY2U/Jyk7XG4gIH1cblxuICB3cml0ZWFibGUub24oJ2RhdGEnLCAoZGF0YSkgPT4geyByZXR1cm4gbmFtZXNBbmRFbWFpbHMucHVzaChkYXRhKTsgfSlcbiAgICAub24oJ2VuZCcsICgpID0+IHtcbiAgICAgIGZpbmREYWlseUNsZWFucyhyZXN1bHRzLCBuYW1lc0FuZEVtYWlscyk7XG4gICAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVhZEluRmlsZSA9IGFzeW5jIChmcywgY3N2KSA9PiB7XG4gIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgbGV0IGVycm9yID0gZmFsc2U7XG4gIGNvbnN0IHJlYWRhYmxlID0gZnMuY3JlYXRlUmVhZFN0cmVhbSgnc3JjL2R1dGllczIuY3N2Jyk7XG5cbiAgcmVhZGFibGUub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgZXJyb3IgPSB0cnVlO1xuICB9KTtcblxuICBjb25zdCB3cml0ZWFibGUgPSByZWFkYWJsZS5waXBlKGNzdigpKTtcbiAgd3JpdGVhYmxlLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIGVycm9yID0gdHJ1ZTtcbiAgfSk7XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coJ1RoZXJlIHdhcyBhbiBlcnJvciByZWFkaW5nIHRoZSBmaWxlLiBBcmUgeW91IHN1cmUgeW91IHB1dCBpdCBpbiB0aGUgcmlnaHQgcGxhY2U/Jyk7XG4gIH1cblxuICB3cml0ZWFibGUub24oJ2RhdGEnLCAoZGF0YSkgPT4geyByZXR1cm4gcmVzdWx0cy5wdXNoKGRhdGEpOyB9KVxuICAgIC5vbignZW5kJywgKCkgPT4ge1xuICAgICAgcmVhZEluRW1haWxzKGZzLCBjc3YsIHJlc3VsdHMpO1xuICAgIH0pO1xufTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "excel_controller.js"
      ],
      "names": [
        "cleanDate",
        "day",
        "date",
        "month",
        "dateMonth",
        "findEmail",
        "fullName",
        "namesAndEmails",
        "email",
        "forEach",
        "obj",
        "Object",
        "keys",
        "key",
        "findDailyCleans",
        "data",
        "currentDay",
        "Date",
        "getDay",
        "targetDate",
        "getDate",
        "getMonth",
        "foundKey",
        "console",
        "log",
        "firstNameKey",
        "key2",
        "match",
        "namesCleaningWhat",
        "push",
        "name",
        "body",
        "to",
        "readInEmails",
        "fs",
        "csv",
        "results",
        "error",
        "readable",
        "createReadStream",
        "on",
        "err",
        "writeable",
        "pipe",
        "readInFile"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/",
      "sourcesContent": [
        "import { sendEmail } from './email_controller';\n\nconst cleanDate = (day, date, month) => {\n  const dateMonth = `${month}/${date}`;\n  switch (day) {\n    case 1:\n      return `Mon ${dateMonth}`;\n    case 2:\n      return `Tue ${dateMonth}`;\n    case 3:\n      return `Wed ${dateMonth}`;\n    case 4:\n      return `Thu ${dateMonth}`;\n    case 5:\n      return `Fri ${dateMonth}`;\n    case 6:\n      return `Sat ${dateMonth}`;\n    case 0:\n      return `Sun ${dateMonth}`;\n    default:\n      return `Tue ${dateMonth}`;\n  }\n};\n\nconst findEmail = (fullName, namesAndEmails) => {\n  let email = '';\n  // eslint-disable-next-line consistent-return\n  namesAndEmails.forEach((obj) => {\n    Object.keys(obj).forEach((key) => {\n      if (obj[key] === fullName) {\n        email = obj['Personal Gmail'];\n      }\n    });\n  });\n\n  return email;\n};\n\nexport const findDailyCleans = (data, namesAndEmails) => {\n  const currentDay = new Date().getDay();\n  const targetDate = cleanDate(currentDay, new Date().getDate(), new Date().getMonth() + 1);\n\n  let foundKey = false;\n  Object.keys(data[0]).forEach((key) => {\n    if (key === targetDate) {\n      foundKey = true;\n    }\n  });\n\n  if (!foundKey) {\n    console.log('Date that is not on sheet. Bye! ');\n    return;\n  }\n\n  let firstNameKey = 'First Name';\n\n  Object.keys(data).forEach((key) => {\n    Object.keys(data[key]).forEach((key2) => {\n      if (key2.match('First Name')) {\n        firstNameKey = key2;\n      }\n    });\n  });\n\n  const namesCleaningWhat = [];\n\n  Object.keys(data).forEach((key) => {\n    if (data[key][targetDate] !== '') {\n      const fullName = `${data[key][firstNameKey]} ${data[key]['Last Name']}`;\n      namesCleaningWhat.push({\n        name: fullName,\n        body: `Hey there! Just a bump, today (${targetDate}) you're cleaning: ${data[key][targetDate]}`,\n        to: findEmail(fullName, namesAndEmails),\n      });\n    }\n  });\n\n  namesCleaningWhat.forEach((obj) => {\n    sendEmail(obj, targetDate);\n  });\n};\n\nexport const readInEmails = async (fs, csv, results) => {\n  const namesAndEmails = [];\n  let error = false;\n  const readable = fs.createReadStream('src/namesAndEmails.csv');\n\n  readable.on('error', (err) => {\n    console.log(err);\n    error = true;\n  });\n\n  const writeable = readable.pipe(csv());\n  writeable.on('error', (err) => {\n    console.log(err);\n    error = true;\n  });\n\n  if (error) {\n    console.log('There was an error reading the file. Are you sure you put it in the right place?');\n  }\n\n  writeable.on('data', (data) => { return namesAndEmails.push(data); })\n    .on('end', () => {\n      findDailyCleans(results, namesAndEmails);\n    });\n};\n\nexport const readInFile = async (fs, csv) => {\n  const results = [];\n  let error = false;\n  const readable = fs.createReadStream('src/duties2.csv');\n\n  readable.on('error', (err) => {\n    console.log(err);\n    error = true;\n  });\n\n  const writeable = readable.pipe(csv());\n  writeable.on('error', (err) => {\n    console.log(err);\n    error = true;\n  });\n\n  if (error) {\n    console.log('There was an error reading the file. Are you sure you put it in the right place?');\n  }\n\n  writeable.on('data', (data) => { return results.push(data); })\n    .on('end', () => {\n      readInEmails(fs, csv, results);\n    });\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1630168182213
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/jtsan/repos/auto-cleans-bumper/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jtsan/repos/auto-cleans-bumper\",\"filename\":\"/Users/jtsan/repos/auto-cleans-bumper/src/controllers/email_controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jtsan/repos/auto-cleans-bumper\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.0": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/jtsan/repos/auto-cleans-bumper",
      "filename": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/email_controller.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/jtsan/repos/auto-cleans-bumper",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/email_controller.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/email_controller.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/",
        "sourceFileName": "email_controller.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sendEmail = void 0;\n\nvar _mail = _interopRequireDefault(require(\"@sendgrid/mail\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable no-unreachable */\n\n/* eslint-disable import/prefer-default-export */\nconst sendEmail = (emailInfo, targetDate) => {\n  const msg = {\n    to: emailInfo.to,\n    from: 'sigma.nu@dartmouth.edu',\n    // Use the email address or domain you verified above\n    subject: `Cleans bump: ${targetDate}`,\n    html: `<p> ${emailInfo.body} </p>`\n  };\n  console.log(`sending the email to ${emailInfo.to} about cleaning ${emailInfo.body} on ${targetDate}`);\n\n  _mail.default.send(msg).then(() => {}, error => {\n    console.error(error);\n\n    if (error.response) {\n      console.error(error.response.body);\n    }\n  });\n};\n\nexports.sendEmail = sendEmail;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVtYWlsX2NvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsic2VuZEVtYWlsIiwiZW1haWxJbmZvIiwidGFyZ2V0RGF0ZSIsIm1zZyIsInRvIiwiZnJvbSIsInN1YmplY3QiLCJodG1sIiwiYm9keSIsImNvbnNvbGUiLCJsb2ciLCJzZ01haWwiLCJzZW5kIiwidGhlbiIsImVycm9yIiwicmVzcG9uc2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQTs7OztBQUZBOztBQUNBO0FBR08sTUFBTUEsU0FBUyxHQUFHLENBQUNDLFNBQUQsRUFBWUMsVUFBWixLQUEyQjtBQUNsRCxRQUFNQyxHQUFHLEdBQUc7QUFDVkMsSUFBQUEsRUFBRSxFQUFFSCxTQUFTLENBQUNHLEVBREo7QUFFVkMsSUFBQUEsSUFBSSxFQUFFLHdCQUZJO0FBRXNCO0FBQ2hDQyxJQUFBQSxPQUFPLEVBQUcsZ0JBQWVKLFVBQVcsRUFIMUI7QUFJVkssSUFBQUEsSUFBSSxFQUFHLE9BQU1OLFNBQVMsQ0FBQ08sSUFBSztBQUpsQixHQUFaO0FBTUFDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLHdCQUF1QlQsU0FBUyxDQUFDRyxFQUFHLG1CQUFrQkgsU0FBUyxDQUFDTyxJQUFLLE9BQU1OLFVBQVcsRUFBbkc7O0FBQ0FTLGdCQUNHQyxJQURILENBQ1FULEdBRFIsRUFFR1UsSUFGSCxDQUVRLE1BQU0sQ0FBRSxDQUZoQixFQUVtQkMsS0FBRCxJQUFXO0FBQ3pCTCxJQUFBQSxPQUFPLENBQUNLLEtBQVIsQ0FBY0EsS0FBZDs7QUFFQSxRQUFJQSxLQUFLLENBQUNDLFFBQVYsRUFBb0I7QUFDbEJOLE1BQUFBLE9BQU8sQ0FBQ0ssS0FBUixDQUFjQSxLQUFLLENBQUNDLFFBQU4sQ0FBZVAsSUFBN0I7QUFDRDtBQUNGLEdBUkg7QUFTRCxDQWpCTSIsInNvdXJjZVJvb3QiOiIvVXNlcnMvanRzYW4vcmVwb3MvYXV0by1jbGVhbnMtYnVtcGVyL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby11bnJlYWNoYWJsZSAqL1xuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xuaW1wb3J0IHNnTWFpbCBmcm9tICdAc2VuZGdyaWQvbWFpbCc7XG5cbmV4cG9ydCBjb25zdCBzZW5kRW1haWwgPSAoZW1haWxJbmZvLCB0YXJnZXREYXRlKSA9PiB7XG4gIGNvbnN0IG1zZyA9IHtcbiAgICB0bzogZW1haWxJbmZvLnRvLFxuICAgIGZyb206ICdzaWdtYS5udUBkYXJ0bW91dGguZWR1JywgLy8gVXNlIHRoZSBlbWFpbCBhZGRyZXNzIG9yIGRvbWFpbiB5b3UgdmVyaWZpZWQgYWJvdmVcbiAgICBzdWJqZWN0OiBgQ2xlYW5zIGJ1bXA6ICR7dGFyZ2V0RGF0ZX1gLFxuICAgIGh0bWw6IGA8cD4gJHtlbWFpbEluZm8uYm9keX0gPC9wPmAsXG4gIH07XG4gIGNvbnNvbGUubG9nKGBzZW5kaW5nIHRoZSBlbWFpbCB0byAke2VtYWlsSW5mby50b30gYWJvdXQgY2xlYW5pbmcgJHtlbWFpbEluZm8uYm9keX0gb24gJHt0YXJnZXREYXRlfWApO1xuICBzZ01haWxcbiAgICAuc2VuZChtc2cpXG4gICAgLnRoZW4oKCkgPT4ge30sIChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgICAgIGlmIChlcnJvci5yZXNwb25zZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yLnJlc3BvbnNlLmJvZHkpO1xuICAgICAgfVxuICAgIH0pO1xufTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "email_controller.js"
      ],
      "names": [
        "sendEmail",
        "emailInfo",
        "targetDate",
        "msg",
        "to",
        "from",
        "subject",
        "html",
        "body",
        "console",
        "log",
        "sgMail",
        "send",
        "then",
        "error",
        "response"
      ],
      "mappings": ";;;;;;;AAEA;;;;AAFA;;AACA;AAGO,MAAMA,SAAS,GAAG,CAACC,SAAD,EAAYC,UAAZ,KAA2B;AAClD,QAAMC,GAAG,GAAG;AACVC,IAAAA,EAAE,EAAEH,SAAS,CAACG,EADJ;AAEVC,IAAAA,IAAI,EAAE,wBAFI;AAEsB;AAChCC,IAAAA,OAAO,EAAG,gBAAeJ,UAAW,EAH1B;AAIVK,IAAAA,IAAI,EAAG,OAAMN,SAAS,CAACO,IAAK;AAJlB,GAAZ;AAMAC,EAAAA,OAAO,CAACC,GAAR,CAAa,wBAAuBT,SAAS,CAACG,EAAG,mBAAkBH,SAAS,CAACO,IAAK,OAAMN,UAAW,EAAnG;;AACAS,gBACGC,IADH,CACQT,GADR,EAEGU,IAFH,CAEQ,MAAM,CAAE,CAFhB,EAEmBC,KAAD,IAAW;AACzBL,IAAAA,OAAO,CAACK,KAAR,CAAcA,KAAd;;AAEA,QAAIA,KAAK,CAACC,QAAV,EAAoB;AAClBN,MAAAA,OAAO,CAACK,KAAR,CAAcA,KAAK,CAACC,QAAN,CAAeP,IAA7B;AACD;AACF,GARH;AASD,CAjBM",
      "sourceRoot": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/",
      "sourcesContent": [
        "/* eslint-disable no-unreachable */\n/* eslint-disable import/prefer-default-export */\nimport sgMail from '@sendgrid/mail';\n\nexport const sendEmail = (emailInfo, targetDate) => {\n  const msg = {\n    to: emailInfo.to,\n    from: 'sigma.nu@dartmouth.edu', // Use the email address or domain you verified above\n    subject: `Cleans bump: ${targetDate}`,\n    html: `<p> ${emailInfo.body} </p>`,\n  };\n  console.log(`sending the email to ${emailInfo.to} about cleaning ${emailInfo.body} on ${targetDate}`);\n  sgMail\n    .send(msg)\n    .then(() => {}, (error) => {\n      console.error(error);\n\n      if (error.response) {\n        console.error(error.response.body);\n      }\n    });\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1630168187546
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/jtsan/repos/auto-cleans-bumper/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jtsan/repos/auto-cleans-bumper\",\"filename\":\"/Users/jtsan/repos/auto-cleans-bumper/src/controllers/excel_controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jtsan/repos/auto-cleans-bumper\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.0": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/jtsan/repos/auto-cleans-bumper",
      "filename": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/excel_controller.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/jtsan/repos/auto-cleans-bumper",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/excel_controller.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/excel_controller.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/",
        "sourceFileName": "excel_controller.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.readInFile = exports.readInEmails = exports.findDailyCleans = void 0;\n\nvar _email_controller = require(\"./email_controller\");\n\nconst cleanDate = (day, date, month) => {\n  const dateMonth = `${month}/${date}`;\n\n  switch (day) {\n    case 1:\n      return `Mon ${dateMonth}`;\n\n    case 2:\n      return `Tue ${dateMonth}`;\n\n    case 3:\n      return `Wed ${dateMonth}`;\n\n    case 4:\n      return `Thu ${dateMonth}`;\n\n    case 5:\n      return `Fri ${dateMonth}`;\n\n    case 6:\n      return `Sat ${dateMonth}`;\n\n    case 0:\n      return `Sun ${dateMonth}`;\n\n    default:\n      return `Tue ${dateMonth}`;\n  }\n};\n\nconst findEmail = (fullName, namesAndEmails) => {\n  let email = ''; // eslint-disable-next-line consistent-return\n\n  namesAndEmails.forEach(obj => {\n    Object.keys(obj).forEach(key => {\n      if (obj[key] === fullName) {\n        email = obj['Personal Gmail'];\n      }\n    });\n  });\n  return email;\n};\n\nconst findDailyCleans = (data, namesAndEmails) => {\n  const currentDay = new Date().getDay();\n  const targetDate = cleanDate(currentDay, new Date().getDate(), new Date().getMonth() + 1);\n  let foundKey = false;\n  Object.keys(data[0]).forEach(key => {\n    if (key === targetDate) {\n      foundKey = true;\n    }\n  });\n\n  if (!foundKey) {\n    console.log('Date that is not on sheet. Bye! ');\n    return;\n  }\n\n  let firstNameKey = 'First Name';\n  Object.keys(data).forEach(key => {\n    Object.keys(data[key]).forEach(key2 => {\n      if (key2.match('First Name')) {\n        firstNameKey = key2;\n      }\n    });\n  });\n  const namesCleaningWhat = [];\n  Object.keys(data).forEach(key => {\n    if (data[key][targetDate] !== '') {\n      const fullName = `${data[key][firstNameKey]} ${data[key]['Last Name']}`;\n      namesCleaningWhat.push({\n        name: fullName,\n        body: `Hey there! Just a bump, today (${targetDate}) you're cleaning: ${data[key][targetDate]}`,\n        to: findEmail(fullName, namesAndEmails)\n      });\n    }\n  });\n  namesCleaningWhat.forEach(obj => {\n    (0, _email_controller.sendEmail)(obj, targetDate);\n  });\n};\n\nexports.findDailyCleans = findDailyCleans;\n\nconst readInEmails = async (fs, csv, results) => {\n  const namesAndEmails = [];\n  let error = false;\n  const readable = fs.createReadStream('src/namesAndEmails.csv');\n  readable.on('error', err => {\n    console.log(err);\n    error = true;\n  });\n  const writeable = readable.pipe(csv());\n  writeable.on('error', err => {\n    console.log(err);\n    error = true;\n  });\n\n  if (error) {\n    console.log('There was an error reading the file. Are you sure you put it in the right place?');\n  }\n\n  writeable.on('data', data => {\n    return namesAndEmails.push(data);\n  }).on('end', () => {\n    findDailyCleans(results, namesAndEmails);\n  });\n};\n\nexports.readInEmails = readInEmails;\n\nconst readInFile = async (fs, csv) => {\n  const results = [];\n  let error = false;\n  const readable = fs.createReadStream('src/duties2.csv');\n  readable.on('error', err => {\n    console.log(err);\n    error = true;\n  });\n  const writeable = readable.pipe(csv());\n  writeable.on('error', err => {\n    console.log(err);\n    error = true;\n  });\n\n  if (error) {\n    console.log('There was an error reading the file. Are you sure you put it in the right place?');\n  }\n\n  writeable.on('data', data => {\n    return results.push(data);\n  }).on('end', () => {\n    readInEmails(fs, csv, results);\n  });\n};\n\nexports.readInFile = readInFile;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4Y2VsX2NvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiY2xlYW5EYXRlIiwiZGF5IiwiZGF0ZSIsIm1vbnRoIiwiZGF0ZU1vbnRoIiwiZmluZEVtYWlsIiwiZnVsbE5hbWUiLCJuYW1lc0FuZEVtYWlscyIsImVtYWlsIiwiZm9yRWFjaCIsIm9iaiIsIk9iamVjdCIsImtleXMiLCJrZXkiLCJmaW5kRGFpbHlDbGVhbnMiLCJkYXRhIiwiY3VycmVudERheSIsIkRhdGUiLCJnZXREYXkiLCJ0YXJnZXREYXRlIiwiZ2V0RGF0ZSIsImdldE1vbnRoIiwiZm91bmRLZXkiLCJjb25zb2xlIiwibG9nIiwiZmlyc3ROYW1lS2V5Iiwia2V5MiIsIm1hdGNoIiwibmFtZXNDbGVhbmluZ1doYXQiLCJwdXNoIiwibmFtZSIsImJvZHkiLCJ0byIsInJlYWRJbkVtYWlscyIsImZzIiwiY3N2IiwicmVzdWx0cyIsImVycm9yIiwicmVhZGFibGUiLCJjcmVhdGVSZWFkU3RyZWFtIiwib24iLCJlcnIiLCJ3cml0ZWFibGUiLCJwaXBlIiwicmVhZEluRmlsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUVBLE1BQU1BLFNBQVMsR0FBRyxDQUFDQyxHQUFELEVBQU1DLElBQU4sRUFBWUMsS0FBWixLQUFzQjtBQUN0QyxRQUFNQyxTQUFTLEdBQUksR0FBRUQsS0FBTSxJQUFHRCxJQUFLLEVBQW5DOztBQUNBLFVBQVFELEdBQVI7QUFDRSxTQUFLLENBQUw7QUFDRSxhQUFRLE9BQU1HLFNBQVUsRUFBeEI7O0FBQ0YsU0FBSyxDQUFMO0FBQ0UsYUFBUSxPQUFNQSxTQUFVLEVBQXhCOztBQUNGLFNBQUssQ0FBTDtBQUNFLGFBQVEsT0FBTUEsU0FBVSxFQUF4Qjs7QUFDRixTQUFLLENBQUw7QUFDRSxhQUFRLE9BQU1BLFNBQVUsRUFBeEI7O0FBQ0YsU0FBSyxDQUFMO0FBQ0UsYUFBUSxPQUFNQSxTQUFVLEVBQXhCOztBQUNGLFNBQUssQ0FBTDtBQUNFLGFBQVEsT0FBTUEsU0FBVSxF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QUFoQjtBQUNBLE1BQUlDLEtBQUssR0FBRyxLQUFaO0FBQ0EsUUFBTUMsUUFBUSxHQUFHSixFQUFFLENBQUNLLGdCQUFILENBQW9CLGlCQUFwQixDQUFqQjtBQUVBRCxFQUFBQSxRQUFRLENBQUNFLEVBQVQsQ0FBWSxPQUFaLEVBQXNCQyxHQUFELElBQVM7QUFDNUJsQixJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWWlCLEdBQVo7QUFDQUosSUFBQUEsS0FBSyxHQUFHLElBQVI7QUFDRCxHQUhEO0FBS0EsUUFBTUssU0FBUyxHQUFHSixRQUFRLENBQUNLLElBQVQsQ0FBY1IsR0FBRyxFQUFqQixDQUFsQjtBQUNBTyxFQUFBQSxTQUFTLENBQUNGLEVBQVYsQ0FBYSxPQUFiLEVBQXVCQyxHQUFELElBQVM7QUFDN0JsQixJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWWlCLEdBQVo7QUFDQUosSUFBQUEsS0FBSyxHQUFHLElBQVI7QUFDRCxHQUhEOztBQUtBLE1BQUlBLEtBQUosRUFBVztBQUNUZCxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxrRkFBWjtBQUNEOztBQUVEa0IsRUFBQUEsU0FBUyxDQUFDRixFQUFWLENBQWEsTUFBYixFQUFzQnpCLElBQUQsSUFBVTtBQUFFLFdBQU9xQixPQUFPLENBQUNQLElBQVIsQ0FBYWQsSUFBYixDQUFQO0FBQTRCLEdBQTdELEVBQ0d5QixFQURILENBQ00sS0FETixFQUNhLE1BQU07QUFDZlAsSUFBQUEsWUFBWSxDQUFDQyxFQUFELEVBQUtDLEdBQUwsRUFBVUMsT0FBVixDQUFaO0FBQ0QsR0FISDtBQUlELENBeEJNIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9qdHNhbi9yZXBvcy9hdXRvLWNsZWFucy1idW1wZXIvc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNlbmRFbWFpbCB9IGZyb20gJy4vZW1haWxfY29udHJvbGxlcic7XG5cbmNvbnN0IGNsZWFuRGF0ZSA9IChkYXksIGRhdGUsIG1vbnRoKSA9PiB7XG4gIGNvbnN0IGRhdGVNb250aCA9IGAke21vbnRofS8ke2RhdGV9YDtcbiAgc3dpdGNoIChkYXkpIHtcbiAgICBjYXNlIDE6XG4gICAgICByZXR1cm4gYE1vbiAke2RhdGVNb250aH1gO1xuICAgIGNhc2UgMjpcbiAgICAgIHJldHVybiBgVHVlICR7ZGF0ZU1vbnRofWA7XG4gICAgY2FzZSAzOlxuICAgICAgcmV0dXJuIGBXZWQgJHtkYXRlTW9udGh9YDtcbiAgICBjYXNlIDQ6XG4gICAgICByZXR1cm4gYFRodSAke2RhdGVNb250aH1gO1xuICAgIGNhc2UgNTpcbiAgICAgIHJldHVybiBgRnJpICR7ZGF0ZU1vbnRofWA7XG4gICAgY2FzZSA2OlxuICAgICAgcmV0dXJuIGBTYXQgJHtkYXRlTW9udGh9YDtcbiAgICBjYXNlIDA6XG4gICAgICByZXR1cm4gYFN1biAke2RhdGVNb250aH1gO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gYFR1ZSAke2RhdGVNb250aH1gO1xuICB9XG59O1xuXG5jb25zdCBmaW5kRW1haWwgPSAoZnVsbE5hbWUsIG5hbWVzQW5kRW1haWxzKSA9PiB7XG4gIGxldCBlbWFpbCA9ICcnO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgbmFtZXNBbmRFbWFpbHMuZm9yRWFjaCgob2JqKSA9PiB7XG4gICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGlmIChvYmpba2V5XSA9PT0gZnVsbE5hbWUpIHtcbiAgICAgICAgZW1haWwgPSBvYmpbJ1BlcnNvbmFsIEdtYWlsJ107XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiBlbWFpbDtcbn07XG5cbmV4cG9ydCBjb25zdCBmaW5kRGFpbHlDbGVhbnMgPSAoZGF0YSwgbmFtZXNBbmRFbWFpbHMpID0+IHtcbiAgY29uc3QgY3VycmVudERheSA9IG5ldyBEYXRlKCkuZ2V0RGF5KCk7XG4gIGNvbnN0IHRhcmdldERhdGUgPSBjbGVhbkRhdGUoY3VycmVudERheSwgbmV3IERhdGUoKS5nZXREYXRlKCksIG5ldyBEYXRlKCkuZ2V0TW9udGgoKSArIDEpO1xuXG4gIGxldCBmb3VuZEtleSA9IGZhbHNlO1xuICBPYmplY3Qua2V5cyhkYXRhWzBdKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBpZiAoa2V5ID09PSB0YXJnZXREYXRlKSB7XG4gICAgICBmb3VuZEtleSA9IHRydWU7XG4gICAgfVxuICB9KTtcblxuICBpZiAoIWZvdW5kS2V5KSB7XG4gICAgY29uc29sZS5sb2coJ0RhdGUgdGhhdCBpcyBub3Qgb24gc2hlZXQuIEJ5ZSEgJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IGZpcnN0TmFtZUtleSA9ICdGaXJzdCBOYW1lJztcblxuICBPYmplY3Qua2V5cyhkYXRhKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBPYmplY3Qua2V5cyhkYXRhW2tleV0pLmZvckVhY2goKGtleTIpID0+IHtcbiAgICAgIGlmIChrZXkyLm1hdGNoKCdGaXJzdCBOYW1lJykpIHtcbiAgICAgICAgZmlyc3ROYW1lS2V5ID0ga2V5MjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgY29uc3QgbmFtZXNDbGVhbmluZ1doYXQgPSBbXTtcblxuICBPYmplY3Qua2V5cyhkYXRhKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBpZiAoZGF0YVtrZXldW3RhcmdldERhdGVdICE9PSAnJykge1xuICAgICAgY29uc3QgZnVsbE5hbWUgPSBgJHtkYXRhW2tleV1bZmlyc3ROYW1lS2V5XX0gJHtkYXRhW2tleV1bJ0xhc3QgTmFtZSddfWA7XG4gICAgICBuYW1lc0NsZWFuaW5nV2hhdC5wdXNoKHtcbiAgICAgICAgbmFtZTogZnVsbE5hbWUsXG4gICAgICAgIGJvZHk6IGBIZXkgdGhlcmUhIEp1c3QgYSBidW1wLCB0b2RheSAoJHt0YXJnZXREYXRlfSkgeW91J3JlIGNsZWFuaW5nOiAke2RhdGFba2V5XVt0YXJnZXREYXRlXX1gLFxuICAgICAgICB0bzogZmluZEVtYWlsKGZ1bGxOYW1lLCBuYW1lc0FuZEVtYWlscyksXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIG5hbWVzQ2xlYW5pbmdXaGF0LmZvckVhY2goKG9iaikgPT4ge1xuICAgIHNlbmRFbWFpbChvYmosIHRhcmdldERhdGUpO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCByZWFkSW5FbWFpbHMgPSBhc3luYyAoZnMsIGNzdiwgcmVzdWx0cykgPT4ge1xuICBjb25zdCBuYW1lc0FuZEVtYWlscyA9IFtdO1xuICBsZXQgZXJyb3IgPSBmYWxzZTtcbiAgY29uc3QgcmVhZGFibGUgPSBmcy5jcmVhdGVSZWFkU3RyZWFtKCdzcmMvbmFtZXNBbmRFbWFpbHMuY3N2Jyk7XG5cbiAgcmVhZGFibGUub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgZXJyb3IgPSB0cnVlO1xuICB9KTtcblxuICBjb25zdCB3cml0ZWFibGUgPSByZWFkYWJsZS5waXBlKGNzdigpKTtcbiAgd3JpdGVhYmxlLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIGVycm9yID0gdHJ1ZTtcbiAgfSk7XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coJ1RoZXJlIHdhcyBhbiBlcnJvciByZWFkaW5nIHRoZSBmaWxlLiBBcmUgeW91IHN1cmUgeW91IHB1dCBpdCBpbiB0aGUgcmlnaHQgcGxhY2U/Jyk7XG4gIH1cblxuICB3cml0ZWFibGUub24oJ2RhdGEnLCAoZGF0YSkgPT4geyByZXR1cm4gbmFtZXNBbmRFbWFpbHMucHVzaChkYXRhKTsgfSlcbiAgICAub24oJ2VuZCcsICgpID0+IHtcbiAgICAgIGZpbmREYWlseUNsZWFucyhyZXN1bHRzLCBuYW1lc0FuZEVtYWlscyk7XG4gICAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVhZEluRmlsZSA9IGFzeW5jIChmcywgY3N2KSA9PiB7XG4gIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgbGV0IGVycm9yID0gZmFsc2U7XG4gIGNvbnN0IHJlYWRhYmxlID0gZnMuY3JlYXRlUmVhZFN0cmVhbSgnc3JjL2R1dGllczIuY3N2Jyk7XG5cbiAgcmVhZGFibGUub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgZXJyb3IgPSB0cnVlO1xuICB9KTtcblxuICBjb25zdCB3cml0ZWFibGUgPSByZWFkYWJsZS5waXBlKGNzdigpKTtcbiAgd3JpdGVhYmxlLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIGVycm9yID0gdHJ1ZTtcbiAgfSk7XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coJ1RoZXJlIHdhcyBhbiBlcnJvciByZWFkaW5nIHRoZSBmaWxlLiBBcmUgeW91IHN1cmUgeW91IHB1dCBpdCBpbiB0aGUgcmlnaHQgcGxhY2U/Jyk7XG4gIH1cblxuICB3cml0ZWFibGUub24oJ2RhdGEnLCAoZGF0YSkgPT4geyByZXR1cm4gcmVzdWx0cy5wdXNoKGRhdGEpOyB9KVxuICAgIC5vbignZW5kJywgKCkgPT4ge1xuICAgICAgcmVhZEluRW1haWxzKGZzLCBjc3YsIHJlc3VsdHMpO1xuICAgIH0pO1xufTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "excel_controller.js"
      ],
      "names": [
        "cleanDate",
        "day",
        "date",
        "month",
        "dateMonth",
        "findEmail",
        "fullName",
        "namesAndEmails",
        "email",
        "forEach",
        "obj",
        "Object",
        "keys",
        "key",
        "findDailyCleans",
        "data",
        "currentDay",
        "Date",
        "getDay",
        "targetDate",
        "getDate",
        "getMonth",
        "foundKey",
        "console",
        "log",
        "firstNameKey",
        "key2",
        "match",
        "namesCleaningWhat",
        "push",
        "name",
        "body",
        "to",
        "readInEmails",
        "fs",
        "csv",
        "results",
        "error",
        "readable",
        "createReadStream",
        "on",
        "err",
        "writeable",
        "pipe",
        "readInFile"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/jtsan/repos/auto-cleans-bumper/src/controllers/",
      "sourcesContent": [
        "import { sendEmail } from './email_controller';\n\nconst cleanDate = (day, date, month) => {\n  const dateMonth = `${month}/${date}`;\n  switch (day) {\n    case 1:\n      return `Mon ${dateMonth}`;\n    case 2:\n      return `Tue ${dateMonth}`;\n    case 3:\n      return `Wed ${dateMonth}`;\n    case 4:\n      return `Thu ${dateMonth}`;\n    case 5:\n      return `Fri ${dateMonth}`;\n    case 6:\n      return `Sat ${dateMonth}`;\n    case 0:\n      return `Sun ${dateMonth}`;\n    default:\n      return `Tue ${dateMonth}`;\n  }\n};\n\nconst findEmail = (fullName, namesAndEmails) => {\n  let email = '';\n  // eslint-disable-next-line consistent-return\n  namesAndEmails.forEach((obj) => {\n    Object.keys(obj).forEach((key) => {\n      if (obj[key] === fullName) {\n        email = obj['Personal Gmail'];\n      }\n    });\n  });\n\n  return email;\n};\n\nexport const findDailyCleans = (data, namesAndEmails) => {\n  const currentDay = new Date().getDay();\n  const targetDate = cleanDate(currentDay, new Date().getDate(), new Date().getMonth() + 1);\n\n  let foundKey = false;\n  Object.keys(data[0]).forEach((key) => {\n    if (key === targetDate) {\n      foundKey = true;\n    }\n  });\n\n  if (!foundKey) {\n    console.log('Date that is not on sheet. Bye! ');\n    return;\n  }\n\n  let firstNameKey = 'First Name';\n\n  Object.keys(data).forEach((key) => {\n    Object.keys(data[key]).forEach((key2) => {\n      if (key2.match('First Name')) {\n        firstNameKey = key2;\n      }\n    });\n  });\n\n  const namesCleaningWhat = [];\n\n  Object.keys(data).forEach((key) => {\n    if (data[key][targetDate] !== '') {\n      const fullName = `${data[key][firstNameKey]} ${data[key]['Last Name']}`;\n      namesCleaningWhat.push({\n        name: fullName,\n        body: `Hey there! Just a bump, today (${targetDate}) you're cleaning: ${data[key][targetDate]}`,\n        to: findEmail(fullName, namesAndEmails),\n      });\n    }\n  });\n\n  namesCleaningWhat.forEach((obj) => {\n    sendEmail(obj, targetDate);\n  });\n};\n\nexport const readInEmails = async (fs, csv, results) => {\n  const namesAndEmails = [];\n  let error = false;\n  const readable = fs.createReadStream('src/namesAndEmails.csv');\n\n  readable.on('error', (err) => {\n    console.log(err);\n    error = true;\n  });\n\n  const writeable = readable.pipe(csv());\n  writeable.on('error', (err) => {\n    console.log(err);\n    error = true;\n  });\n\n  if (error) {\n    console.log('There was an error reading the file. Are you sure you put it in the right place?');\n  }\n\n  writeable.on('data', (data) => { return namesAndEmails.push(data); })\n    .on('end', () => {\n      findDailyCleans(results, namesAndEmails);\n    });\n};\n\nexport const readInFile = async (fs, csv) => {\n  const results = [];\n  let error = false;\n  const readable = fs.createReadStream('src/duties2.csv');\n\n  readable.on('error', (err) => {\n    console.log(err);\n    error = true;\n  });\n\n  const writeable = readable.pipe(csv());\n  writeable.on('error', (err) => {\n    console.log(err);\n    error = true;\n  });\n\n  if (error) {\n    console.log('There was an error reading the file. Are you sure you put it in the right place?');\n  }\n\n  writeable.on('data', (data) => { return results.push(data); })\n    .on('end', () => {\n      readInEmails(fs, csv, results);\n    });\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1630168227860
  }
}